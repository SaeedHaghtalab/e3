sudo: enabled
dist: trusty
language: generic

branches:
  only:
    - master
git:
  submodules: false

env:
   - BASE=3.15.5  REQUIRE=3.0.0 BUILDING_MOD=c
   - BASE=3.15.5  REQUIRE=3.0.2  BUILDING_MOD=c
#   - BASE=7.0.1.1 REQUIRE=3.0.0  BUILDING_MOD=ctia
#   - BASE=7.0.1.1 REQUIRE=3.0.2  BUILDING_MOD=ctia
     
before_install:
   - "export TERM=dumb"
   - sudo apt-get -qq update
   - sudo apt-get install -y realpath ipmitool libtool automake re2c tclx build-essential libreadline-dev libxt-dev x11proto-print-dev libxmu-headers libxmu-dev libxmu6 libxpm-dev libxmuu-dev libxmuu1 libpcre++-dev libsnmp-dev re2c darcs python-dev libxml2-dev libusb-dev libusb-1.0-0-dev libudev-dev  

install:
   -  bash e3_building_test.bash -t ${HOME}/build/epics -b ${BASE} -r ${REQUIRE}

script:
   - bash e3.bash -${BUILDING_MOD} all2
